---
title: Js中闭包的概念和具体使用
autoGroup-5: JS特效
---

## Js中闭包的概念和具体使用

## 快速导航

<TOC />

## 前言

闭包在`js`里面是一个比较抽象的概念,但在面试里,是一个必问的话题,往往面试官希望你列举一些使用闭包的例子

或手写一个闭包

闭包,简单一句话讲就是能够读取其他函数内部变量的函数,当需要函数内容部的变量被外部的代码所访问时

那闭包就非常有用了的,如今,很多框架里面的高级特性都得依赖闭包的

## 示例代码

```js
function a() {       // 定义函数a
    var n = 100;     // 定义一个局部变量n
    var b = function() { // 定义函数b
        n++;   // n自加1
        return n;  // 返回n的值
    }
    return b;  // a函数的返回结果值为函数b
} 

var c = a();  // 执行a函数,得到b,并赋值c
c();          // c函数执行n的值变为101
alert(c());   // 在打印一次值,却变量102
```

## 分析

这个局部变量的函数会被保存下来,在函数外部,是没有办法直接访问函数里面的变量的,但是通过闭包却可以

也就是说,它是用来连接内部函数与外部函数的一个桥梁,闭包产生的本质原因,是作用域链引起的,从而达到外部函数访问内部函数局部变量的目的,其中被嵌套函数就可以称为是一个闭包

闭包的真正目的,就是要把局部的函数永久的保存下来,被外部的变量和代码所访问和使用

当`a`函数中内部的函数被`a`函数以外的函数所访问到,那就可以称为一个闭包

闭包最常见的用途就是把一个变量永久的保存下来,而不是随着函数的执行完毕而被`js`的垃圾回收器所回收

那这样,也会带来一个问题,就是内存得不到及时的回收,有可能会产生内存溢出的危险，具体的解决办法就是,退出函数之前,将不使用的局部变量全部删除清空就可以了

::: tip 友情提醒
如果你把父函数当做对象使用,把闭包当做它的公有方法,把内部变量当做它的私有属性,这时候,要注意不要随便的改变父函数的内部变量的值
:::

## 闭包的用途

1. 对外提供公有属性和方法(也就是函数外部读取函数内的局部变量)

2. 保存变量于内存中,避免全局变量的污染(上面的一个示例就是的,局部变量被保存下来了的)

有时候需要一个模块中定义这样的变量,执行某些操作后,始终保存上一次的值,希望这个变量一直保存在内存中,但又不会污染全局变量,这个时候,我们就可以使用闭包

## 相关文章

1. [理解-JS-中的作用域-作用域链以及闭包](./scope)
2. [深度理解闭包](./understand-closure/)

<footer-FooterLink :isShareLink="false" :isDaShang="true" />
<footer-FeedBack />


