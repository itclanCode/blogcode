(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{520:function(e,t,a){},618:function(e,t,a){"use strict";a(520)},941:function(e,t,a){"use strict";a.r(t);const i=[{label:"id",prop:"e_id",width:"auto",size:"medium",align:"center",showOverflowTooltip:!1},{label:"历史日期",prop:"date",width:"auto",size:"medium",align:"center",showOverflowTooltip:!0},{label:"历史当天",prop:"day",width:"auto",size:"medium",align:"center",showOverflowTooltip:!0},{label:"历史事件标题",prop:"title",width:"auto",size:"medium",align:"center",showOverflowTooltip:!0}];var l={name:"historyToday",data(){return{isDisabled:!1,dialogVisible:!1,isResultNull:!1,datePickerVal:this.forMateNowDate(),defaultTimeVal:this.forMateNowDate(),historyTableColist:i,historyTableData:[],historyDetailTableData:[],page:1,pagesize:5,totalcount:null,enumPicText:{0:"无图片",1:"有图片"},pickerOptions:{disabledDate:e=>e.getTime()>Date.now(),shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"前天",onClick(e){const t=new Date;t.setTime(t.getTime()-1728e5),e.$emit("pick",t)}},{text:"一周前的今天",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},methods:{async handleBtnSearch(){this.isDisabled=!0;console.log(!1,"development"),this.url="https://v.juhe.cn";const e={key:"1dc596bb4e4e56e058abaad7f14adb38",date:this.datePickerVal};let t=await this.$axios.get(this.url+"/todayOnhistory/queryEvent.php",{params:e});if(console.log(t),200==t.status&&0==t.data.error_code){this.isDisabled=!1,this.$message.success("历史今天数据查询成功");const e=t.data.result;e.length>0?(this.historyTableData=e,this.totalcount=e.length):this.historyTableData=[]}else this.isResultNull=!0,this.$message.error("今日接口数据查询已上限,请明日来查询")},forMateNowDate(){let e=new Date;return e.getMonth()+1+"/"+e.getDate()},handleBtnReset(){this.datePickerVal=this.forMateNowDate(),this.historyTableData=[],this.isDisabled=!1},handleSizeChange(e){this.pagesize=e},handleCurrentChange(e){this.page=e},async handleLook(e){console.log(e);console.log(!1,"development"),this.url="https://v.juhe.cn";const t={key:"1dc596bb4e4e56e058abaad7f14adb38",e_id:e};let a=await this.$axios.get(this.url+"/todayOnhistory/queryDetail.php",{params:t});if(console.log(a,"res详情"),200==a.status&&0==a.data.error_code){this.dialogVisible=!0;const e=a.data.result;e.length>0?this.historyDetailTableData=e:this.historyDetailTableData=[]}else this.$message.error(a.data.reason)},handleJinQueFind(e){window.open(e,"_blank")}}},s=(a(618),a(9)),n=Object(s.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"historytoday-wrap"},[t("div",{staticClass:"el-select-wrap"},[t("el-date-picker",{attrs:{clearable:"",align:"center",type:"date",size:"small",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"M/d","default-value":e.defaultTimeVal,"picker-options":e.pickerOptions},model:{value:e.datePickerVal,callback:function(t){e.datePickerVal=t},expression:"datePickerVal"}}),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small",disabled:e.isDisabled},on:{click:e.handleBtnSearch}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-setting",size:"small"},on:{click:e.handleBtnReset}},[e._v("重置")])],1),e._v(" "),0!=e.historyTableData.length?t("div",{staticClass:"result-content"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.historyTableData.slice((e.page-1)*e.pagesize,e.page*e.pagesize),border:""}},[e._l(e.historyTableColist,(function(e){return t("el-table-column",{key:e.label,attrs:{prop:e.prop,label:e.label,width:e.width,align:e.align,medium:e.medium,"default-sort":{prop:"e_id",order:"descending"},sortable:""}})})),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"查看详情",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleLook(a.row.e_id,a.$index)}}},[e._v("查看\n                            ")])],1)]}}],null,!1,4009557068)})],2),e._v(" "),0!=e.historyTableData.length?t("el-pagination",{staticClass:"el-pagination",attrs:{"current-page":e.page,"page-sizes":[5,10,20,30,40,50],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalcount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1):e._e(),e._v(" "),1==e.isResultNull?t("el-empty",{attrs:{description:"暂无数据,今日接口数据查询已上限,请明日来查询"}},[t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleJinQueFind("https://cesuan.itclan.pro/yunyincs/?spread=tui&dhid=720")}}},[e._v("更精确姻缘测试查询")])],1):e._e(),e._v(" "),t("div",{staticClass:"footer-btn"},[t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleJinQueFind("https://cesuan.itclan.pro/yunyincs/?spread=tui&dhid=720")}}},[e._v("更精确姻缘测试查询")])],1),e._v(" "),t("el-dialog",{attrs:{title:"查看详情",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-table",{attrs:{data:e.historyDetailTableData}},[t("el-table-column",{attrs:{align:"center",width:"auto",property:"e_id",label:"id"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"auto",property:"title",label:"事件标题"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.title))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"auto",property:"picNo",label:"是否有图"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.enumPicText[a.row.picNo])+" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"auto",property:"picUrl",label:"图片信息"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("ul",{staticClass:"picurl-ul"},e._l(a.row.picUrl,(function(i,l){return t("li",{key:l},[0!=a.row.picUrl.length?t("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:i.url,fit:"contain",lazy:""}}):e._e()],1)})),0)]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",width:"auto",property:"content",label:"介绍信息","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.content))])]}}])})],1)],1)],1)])}),[],!1,null,"4acad74c",null);t.default=n.exports}}]);