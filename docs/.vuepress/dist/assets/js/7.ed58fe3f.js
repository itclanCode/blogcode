(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1328:function(e,t,o){var n=o(559);o(1329),o(1330);var i=o(771),a=o(1335);n.registerLayout(i),n.registerVisual(a)},1329:function(e,t,o){o(560).__DEV__;var n=o(617),i=o(619),a=o(555),r=a.concatArray,s=a.mergeAll,l=a.map,c=o(566).encodeHTML,u=(o(616),"undefined"==typeof Uint32Array?Array:Uint32Array),h="undefined"==typeof Float64Array?Array:Float64Array;function p(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=l(t,(function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),s([t,e[0],e[1]])})))}var m=n.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],p(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),m.superApply(this,"init",arguments)},mergeOption:function(e){if(p(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}m.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=r(this._flatCoords,t.flatCoords),this._flatCoordsOffset=r(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[2*e],n=this._flatCoordsOffset[2*e+1],i=0;i<n;i++)t[i]=t[i]||[],t[i][0]=this._flatCoords[o+2*i],t[i][1]=this._flatCoords[o+2*i+1];return n}var a=this._getCoordsFromItemModel(e);for(i=0;i<a.length;i++)t[i]=t[i]||[],t[i][0]=a[i][0],t[i][1]=a[i][1];return a.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"==typeof e[0]){for(var o=e.length,n=new u(o),i=new h(o),a=0,r=0,s=0,l=0;l<o;){s++;var c=e[l++];n[r++]=a+t,n[r++]=c;for(var p=0;p<c;p++){var m=e[l++],f=e[l++];i[a++]=m,i[a++]=f}}return{flatCoordsOffset:new Uint32Array(n.buffer,0,r),flatCoords:i,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},getInitialData:function(e,t){var o=new i(["value"],this);return o.hasItemOption=!1,o.initData(e.data,[],(function(e,t,n,i){if(e instanceof Array)return NaN;o.hasItemOption=!0;var a=e.value;return null!=a?a instanceof Array?a[i]:a:void 0})),o},formatTooltip:function(e){var t=this.getData().getItemModel(e),o=t.get("name");if(o)return o;var n=t.get("fromName"),i=t.get("toName"),a=[];return null!=n&&a.push(n),null!=i&&a.push(i),c(a.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}),f=m;e.exports=f},1330:function(e,t,o){o(560).__DEV__;var n=o(559),i=o(1331),a=o(769),r=o(655),s=o(770),l=o(1333),c=o(1334),u=o(771),h=o(760).createClipPath,p=n.extendChartView({type:"lines",init:function(){},render:function(e,t,o){var n=e.getData(),i=this._updateLineDraw(n,e),a=e.get("zlevel"),r=e.get("effect.trailLength"),s=o.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(a).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&r&&(l||s.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(r/10+.9,1),0)})),i.updateData(n);var c=e.get("clip",!0)&&h(e.coordinateSystem,!1,e);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(e,t,o){var n=e.getData();this._updateLineDraw(n,e).incrementalPrepareUpdate(n),this._clearLayer(o),this._finished=!1},incrementalRender:function(e,t,o){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,o){var n=e.getData(),i=e.pipelineContext;if(!this._finished||i.large||i.progressiveRender)return{update:!0};var a=u.reset(e);a.progress&&a.progress({start:0,end:n.count()},n),this._lineDraw.updateLayout(),this._clearLayer(o)},_updateLineDraw:function(e,t){var o=this._lineDraw,n=this._showEffect(t),u=!!t.get("polyline"),h=t.pipelineContext.large;return o&&n===this._hasEffet&&u===this._isPolyline&&h===this._isLargeDraw||(o&&o.remove(),o=this._lineDraw=h?new c:new i(u?n?l:s:n?a:r),this._hasEffet=n,this._isPolyline=u,this._isLargeDraw=h,this.group.removeAll()),this.group.add(o.group),o},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});e.exports=p},1331:function(e,t,o){var n=o(557),i=o(655);function a(e){this._ctor=e||i,this.group=new n.Group}var r=a.prototype;function s(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function l(e){return isNaN(e[0])||isNaN(e[1])}function c(e){return!l(e[0])&&!l(e[1])}r.isPersistent=function(){return!0},r.updateData=function(e){var t=this,o=t.group,n=t._lineData;t._lineData=e,n||o.removeAll();var i=s(e);e.diff(n).add((function(o){!function(e,t,o,n){if(!c(t.getItemLayout(o)))return;var i=new e._ctor(t,o,n);t.setItemGraphicEl(o,i),e.group.add(i)}(t,e,o,i)})).update((function(o,a){!function(e,t,o,n,i,a){var r=t.getItemGraphicEl(n);if(!c(o.getItemLayout(i)))return void e.group.remove(r);r?r.updateData(o,i,a):r=new e._ctor(o,i,a);o.setItemGraphicEl(i,r),e.group.add(r)}(t,n,e,a,o,i)})).remove((function(e){o.remove(n.getItemGraphicEl(e))})).execute()},r.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,o){t.updateLayout(e,o)}),this)},r.incrementalPrepareUpdate=function(e){this._seriesScope=s(e),this._lineData=null,this.group.removeAll()},r.incrementalUpdate=function(e,t){function o(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=e.useHoverLayer=!0)}for(var n=e.start;n<e.end;n++){if(c(t.getItemLayout(n))){var i=new this._ctor(t,n,this._seriesScope);i.traverse(o),this.group.add(i),t.setItemGraphicEl(n,i)}}},r.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},r._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var u=a;e.exports=u},1332:function(e,t,o){var n=o(557),i=o(561),a=n.Line.prototype,r=n.BezierCurve.prototype;function s(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var l=n.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[s(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:a.buildPath,_buildPathCurve:r.buildPath,pointAt:function(e){return this[s(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:a.pointAt,_pointAtCurve:r.pointAt,tangentAt:function(e){var t=this.shape,o=s(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return i.normalize(o,o)},_tangentAtCurve:r.tangentAt});e.exports=l},1333:function(e,t,o){var n=o(770),i=o(555),a=o(769),r=o(561);function s(e,t,o){a.call(this,e,t,o),this._lastFrame=0,this._lastFramePercent=0}var l=s.prototype;l.createLine=function(e,t,o){return new n(e,t,o)},l.updateAnimationPoints=function(e,t){this._points=t;for(var o=[0],n=0,i=1;i<t.length;i++){var a=t[i-1],s=t[i];n+=r.dist(a,s),o.push(n)}if(0!==n){for(i=0;i<o.length;i++)o[i]/=n;this._offsets=o,this._length=n}},l.getLineLength=function(e){return this._length},l.updateSymbolPosition=function(e){var t=e.__t,o=this._points,n=this._offsets,i=o.length;if(n){var a=this._lastFrame;if(t<this._lastFramePercent){for(s=Math.min(a+1,i-1);s>=0&&!(n[s]<=t);s--);s=Math.min(s,i-2)}else{for(var s=a;s<i&&!(n[s]>t);s++);s=Math.min(s-1,i-2)}r.lerp(e.position,o[s],o[s+1],(t-n[s])/(n[s+1]-n[s]));var l=o[s+1][0]-o[s][0],c=o[s+1][1]-o[s][1];e.rotation=-Math.atan2(c,l)-Math.PI/2,this._lastFrame=s,this._lastFramePercent=t,e.ignore=!1}},i.inherits(s,a);var c=s;e.exports=c},1334:function(e,t,o){var n=o(557),i=o(741),a=o(730),r=o(731),s=n.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var o=t.segs,n=t.curveness;if(t.polyline)for(var i=0;i<o.length;){var a=o[i++];if(a>0){e.moveTo(o[i++],o[i++]);for(var r=1;r<a;r++)e.lineTo(o[i++],o[i++])}}else for(i=0;i<o.length;){var s=o[i++],l=o[i++],c=o[i++],u=o[i++];if(e.moveTo(s,l),n>0){var h=(s+c)/2-(l-u)*n,p=(l+u)/2-(c-s)*n;e.quadraticCurveTo(h,p,c,u)}else e.lineTo(c,u)}},findDataIndex:function(e,t){var o=this.shape,n=o.segs,i=o.curveness;if(o.polyline)for(var s=0,l=0;l<n.length;){var c=n[l++];if(c>0)for(var u=n[l++],h=n[l++],p=1;p<c;p++){var m=n[l++],f=n[l++];if(a.containStroke(u,h,m,f))return s}s++}else for(s=0,l=0;l<n.length;){u=n[l++],h=n[l++],m=n[l++],f=n[l++];if(i>0){var d=(u+m)/2-(h-f)*i,g=(h+f)/2-(m-u)*i;if(r.containStroke(u,h,d,g,m,f))return s}else if(a.containStroke(u,h,m,f))return s;s++}return-1}});function l(){this.group=new n.Group}var c=l.prototype;c.isPersistent=function(){return!this._incremental},c.updateData=function(e){this.group.removeAll();var t=new s({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},c.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>5e5?(this._incremental||(this._incremental=new i({silent:!0})),this.group.add(this._incremental)):this._incremental=null},c.incrementalUpdate=function(e,t){var o=new s;o.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(o,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(o,!0):(o.rectHover=!0,o.cursor="default",o.__startIndex=e.start,this.group.add(o))},c.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},c._setCommon=function(e,t,o){var n=t.hostModel;e.setShape({polyline:n.get("polyline"),curveness:n.get("lineStyle.curveness")}),e.useStyle(n.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("color");i&&e.setStyle("stroke",i),e.setStyle("fill"),o||(e.seriesIndex=n.seriesIndex,e.on("mousemove",(function(t){e.dataIndex=null;var o=e.findDataIndex(t.offsetX,t.offsetY);o>0&&(e.dataIndex=o+e.__startIndex)})))},c._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var u=l;e.exports=u},1335:function(e,t){function o(e){return e instanceof Array||(e=[e,e]),e}var n="lineStyle.opacity".split("."),i={seriesType:"lines",reset:function(e,t,i){var a=o(e.get("symbol")),r=o(e.get("symbolSize")),s=e.getData();return s.setVisual("fromSymbol",a&&a[0]),s.setVisual("toSymbol",a&&a[1]),s.setVisual("fromSymbolSize",r&&r[0]),s.setVisual("toSymbolSize",r&&r[1]),s.setVisual("opacity",e.get(n)),{dataEach:s.hasItemOption?function(e,t){var i=e.getItemModel(t),a=o(i.getShallow("symbol",!0)),r=o(i.getShallow("symbolSize",!0)),s=i.get(n);a[0]&&e.setItemVisual(t,"fromSymbol",a[0]),a[1]&&e.setItemVisual(t,"toSymbol",a[1]),r[0]&&e.setItemVisual(t,"fromSymbolSize",r[0]),r[1]&&e.setItemVisual(t,"toSymbolSize",r[1]),e.setItemVisual(t,"opacity",s)}:null}}};e.exports=i},1336:function(e,t,o){var n=o(559);o(1337),o(1344),o(1350),o(1352);var i=o(1355),a=o(1356),r=o(1357),s=o(1358),l=o(768);n.registerLayout(i),n.registerVisual(a),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,r),n.registerPreprocessor(s),l("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])},1337:function(e,t,o){var n=o(555),i=o(766),a=o(617),r=o(566),s=r.encodeHTML,l=r.addCommas,c=o(767),u=o(580).retrieveRawAttr,h=o(622),p=o(579).makeSeriesEncodeForNameBased,m=a.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=i(this,{coordDimensions:["value"],encodeDefaulter:n.curry(p,this)}),o=t.mapDimension("value"),a=n.createHashMap(),r=[],s=[],l=0,c=t.count();l<c;l++){var m=t.getName(l);a.set(m,!0),r.push({name:m,value:t.get(o,l),selected:u(t,l,"selected")})}var f=h.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return n.each(f.regions,(function(e){var t=e.name;a.get(t)||(r.push({name:t}),s.push(t))})),this.updateSelectedMap(r),t.appendValues([],s),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e,t,o,n){for(var i=this.getData(),a=l(this.getRawValue(e)),r=i.getName(e),c=this.seriesGroup,u=[],h=0;h<c.length;h++){var p=c[h].originalData.indexOfName(r),m=i.mapDimension("value");isNaN(c[h].originalData.get(m,p))||u.push(s(c[h].name))}var f="html"===n?"<br/>":"\n";return u.join(", ")+f+s(r+" : "+a)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),o=this.coordinateSystem,n=o.getRegion(t);return n&&o.dataToPoint(n.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}});n.mixin(m,c);var f=m;e.exports=f},1338:function(e,t,o){var n=o(555).each,i=o(753),a=o(558).makeInner,r=o(1339),s=o(1340),l=o(1341),c=o(1342),u=a(),h={load:function(e,t,o){var a=u(t).parsed;if(a)return a;var h,m=t.specialAreas||{},f=t.geoJSON;try{h=f?i(f,o):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}return r(e,h),n(h,(function(t){var o=t.name;s(e,t),l(e,t),c(e,t);var n=m[o];n&&t.transformTo(n.left,n.top,n.width,n.height)})),u(t).parsed={regions:h,boundingRect:p(h)}}};function p(e){for(var t,o=0;o<e.length;o++){var n=e[o].getBoundingRect();(t=t||n.clone()).union(n)}return t}e.exports=h},1339:function(e,t,o){for(var n=o(555),i=o(754),a=[126,25],r=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],s=0;s<r.length;s++)for(var l=0;l<r[s].length;l++)r[s][l][0]/=10.5,r[s][l][1]/=-14,r[s][l][0]+=a[0],r[s][l][1]+=a[1];e.exports=function(e,t){"china"===e&&t.push(new i("南海诸岛",n.map(r,(function(e){return{type:"polygon",exterior:e}})),a))}},1340:function(e,t){var o={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};e.exports=function(e,t){if("china"===e){var n=o[t.name];if(n){var i=t.center;i[0]+=n[0]/10.5,i[1]+=-n[1]/14}}}},1341:function(e,t){var o={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};e.exports=function(e,t){if("world"===e){var n=o[t.name];if(n){var i=t.center;i[0]=n[0],i[1]=n[1]}}}},1342:function(e,t){var o=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];e.exports=function(e,t){"china"===e&&"台湾"===t.name&&t.geometries.push({type:"polygon",exterior:o[0]})}},1343:function(e,t,o){var n=o(746),i=n.parseSVG,a=n.makeViewBoxTransform,r=o(583),s=o(645),l=o(555),c=l.assert,u=l.createHashMap,h=o(563),p=(0,o(558).makeInner)(),m={load:function(e,t){var o=p(t).originRoot;if(o)return{root:o,boundingRect:p(t).boundingRect};var n=f(t);return p(t).originRoot=n.root,p(t).boundingRect=n.boundingRect,n},makeGraphic:function(e,t,o){var n=p(t),i=n.rootMap||(n.rootMap=u()),a=i.get(o);if(a)return a;var r=n.originRoot,s=n.boundingRect;return n.originRootHostKey?a=f(t,s).root:(n.originRootHostKey=o,a=r),i.set(o,a)},removeGraphic:function(e,t,o){var n=p(t),i=n.rootMap;i&&i.removeKey(o),o===n.originRootHostKey&&(n.originRootHostKey=null)}};function f(e,t){var o,n,l=e.svgXML;try{n=(o=l&&i(l,{ignoreViewBox:!0,ignoreRootClip:!0})||{}).root,c(null!=n)}catch(e){throw new Error("Invalid svg format\n"+e.message)}var u=o.width,p=o.height,m=o.viewBoxRect;if(t||(t=null==u||null==p?n.getBoundingRect():new h(0,0,0,0),null!=u&&(t.width=u),null!=p&&(t.height=p)),m){var f=a(m,t.width,t.height),d=n;(n=new r).add(d),d.scale=f.scale,d.position=f.position}return n.setClipPath(new s({shape:t.plain()})),{root:n,boundingRect:t}}e.exports=m},1344:function(e,t,o){var n=o(559),i=o(555),a=o(557),r=o(1345),s=n.extendChartView({type:"map",render:function(e,t,o,n){if(!n||"mapToggleSelect"!==n.type||n.from!==this.uid){var i=this.group;if(i.removeAll(),!e.getHostGeoModel()){if(n&&"geoRoam"===n.type&&"series"===n.componentType&&n.seriesId===e.id)(a=this._mapDraw)&&i.add(a.group);else if(e.needsDrawMap){var a=this._mapDraw||new r(o,!0);i.add(a.group),a.draw(e,t,o,this,n),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,o)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,o){var n=e.originalData,r=this.group;n.each(n.mapDimension("value"),(function(t,o){if(!isNaN(t)){var s=n.getItemLayout(o);if(s&&s.point){var u=s.point,h=s.offset,p=new a.Circle({style:{fill:e.getData().getVisual("color")},shape:{cx:u[0]+9*h,cy:u[1],r:3},silent:!0,z2:8+(h?0:a.Z2_EMPHASIS_LIFT+1)});if(!h){var m=e.mainSeries.getData(),f=n.getName(o),d=m.indexOfName(f),g=n.getItemModel(o),v=g.getModel("label"),_=g.getModel("emphasis.label"),y=m.getItemGraphicEl(d),S=i.retrieve2(e.getFormattedLabel(d,"normal"),f),w=i.retrieve2(e.getFormattedLabel(d,"emphasis"),S),M=y.__seriesMapHighDown,T=Math.random();if(!M){M=y.__seriesMapHighDown={};var b=i.curry(l,!0),x=i.curry(l,!1);y.on("mouseover",b).on("mouseout",x).on("emphasis",b).on("normal",x)}y.__seriesMapCallKey=T,i.extend(M,{recordVersion:T,circle:p,labelModel:v,hoverLabelModel:_,emphasisText:w,normalText:S}),c(M,!1)}r.add(p)}}}))}});function l(e){var t=this.__seriesMapHighDown;t&&t.recordVersion===this.__seriesMapCallKey&&c(t,e)}function c(e,t){var o=e.circle,n=e.labelModel,i=e.hoverLabelModel,r=e.emphasisText,s=e.normalText;t?(o.style.extendFrom(a.setTextStyle({},i,{text:i.get("show")?r:null},{isRectText:!0,useInsideStyle:!1},!0)),o.__mapOriginalZ2=o.z2,o.z2+=a.Z2_EMPHASIS_LIFT):(a.setTextStyle(o.style,n,{text:n.get("show")?s:null,textPosition:n.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),o.dirty(!1),null!=o.__mapOriginalZ2&&(o.z2=o.__mapOriginalZ2,o.__mapOriginalZ2=null))}e.exports=s},1345:function(e,t,o){var n=o(555),i=o(1346),a=o(1348),r=o(1349).onIrrelevantElement,s=o(557),l=o(622),c=o(599).getUID,u=o(611);function h(e){var t=e.getItemStyle(),o=e.get("areaColor");return null!=o&&(t.fill=o),t}function p(e,t){t.eachChild((function(t){n.each(t.__regions,(function(o){t.trigger(e.isSelected(o.name)?"emphasis":"normal")}))}))}function m(e,t){var o=new s.Group;this.uid=c("ec_map_draw"),this._controller=new i(e.getZr()),this._controllerHost={target:t?o:null},this.group=o,this._updateGroup=t,this._mouseDownFlag,this._mapName,this._initialized,o.add(this._regionsGroup=new s.Group),o.add(this._backgroundGroup=new s.Group)}m.prototype={constructor:m,draw:function(e,t,o,i,a){var r="geo"===e.mainType,l=e.getData&&e.getData();r&&t.eachComponent({mainType:"series",subType:"map"},(function(t){l||t.getHostGeoModel()!==e||(l=t.getData())}));var c=e.coordinateSystem;this._updateBackground(c);var m,f=this._regionsGroup,d=this.group,g=c.getTransformInfo(),v=!f.childAt(0)||a;if(v)d.transform=g.roamTransform,d.decomposeTransform(),d.dirty();else{var _=new u;_.transform=g.roamTransform,_.decomposeTransform();var y={scale:_.scale,position:_.position};m=_.scale,s.updateProps(d,y,e)}var S=g.rawScale,w=g.rawPosition;f.removeAll();var M=["itemStyle"],T=["emphasis","itemStyle"],b=["label"],x=["emphasis","label"],C=n.createHashMap();n.each(c.regions,(function(t){var o=C.get(t.name)||C.set(t.name,new s.Group),i=new s.CompoundPath({segmentIgnoreThreshold:1,shape:{paths:[]}});o.add(i);var a,c=(V=e.getRegionModel(t.name)||e).getModel(M),u=V.getModel(T),p=h(c),g=h(u),_=V.getModel(b),y=V.getModel(x);if(l){a=l.indexOfName(t.name);var D=l.getItemVisual(a,"color",!0);D&&(p.fill=D)}var I=function(e){return[e[0]*S[0]+w[0],e[1]*S[1]+w[1]]};n.each(t.geometries,(function(e){if("polygon"===e.type){for(var t=[],o=0;o<e.exterior.length;++o)t.push(I(e.exterior[o]));i.shape.paths.push(new s.Polygon({segmentIgnoreThreshold:1,shape:{points:t}}));for(o=0;o<(e.interiors?e.interiors.length:0);++o){for(var n=e.interiors[o],a=(t=[],0);a<n.length;++a)t.push(I(n[a]));i.shape.paths.push(new s.Polygon({segmentIgnoreThreshold:1,shape:{points:t}}))}}})),i.setStyle(p),i.style.strokeNoScale=!0,i.culling=!0;var L=_.get("show"),A=y.get("show"),P=l&&isNaN(l.get(l.mapDimension("value"),a)),N=l&&l.getItemLayout(a);if(r||P&&(L||A)||N&&N.showLabel){var R,O=r?t.name:a;(!l||a>=0)&&(R=e);var z=new s.Text({position:I(t.center.slice()),scale:[1/d.scale[0],1/d.scale[1]],z2:10,silent:!0});if(s.setLabelStyle(z.style,z.hoverStyle={},_,y,{labelFetcher:R,labelDataIndex:O,defaultText:t.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!v){var G=[1/m[0],1/m[1]];s.updateProps(z,{scale:G},e)}o.add(z)}if(l)l.setItemGraphicEl(a,o);else{var V=e.getRegionModel(t.name);i.eventData={componentType:"geo",componentIndex:e.componentIndex,geoIndex:e.componentIndex,name:t.name,region:V&&V.option||{}}}(o.__regions||(o.__regions=[])).push(t),o.highDownSilentOnTouch=!!e.get("selectedMode"),s.setHoverStyle(o,g),f.add(o)})),this._updateController(e,t,o),function(e,t,o,i,a){o.off("click"),o.off("mousedown"),t.get("selectedMode")&&(o.on("mousedown",(function(){e._mouseDownFlag=!0})),o.on("click",(function(r){if(e._mouseDownFlag){e._mouseDownFlag=!1;for(var s=r.target;!s.__regions;)s=s.parent;if(s){var l={type:("geo"===t.mainType?"geo":"map")+"ToggleSelect",batch:n.map(s.__regions,(function(e){return{name:e.name,from:a.uid}}))};l[t.mainType+"Id"]=t.id,i.dispatchAction(l),p(t,o)}}})))}(this,e,f,o,i),p(e,f)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&l.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(e){var t=e.map;this._mapName!==t&&n.each(l.makeGraphic(t,this.uid),(function(e){this._backgroundGroup.add(e)}),this),this._mapName=t},_updateController:function(e,t,o){var i=e.coordinateSystem,s=this._controller,l=this._controllerHost;l.zoomLimit=e.get("scaleLimit"),l.zoom=i.getZoom(),s.enable(e.get("roam")||!1);var c=e.mainType;function u(){var t={type:"geoRoam",componentType:c};return t[c+"Id"]=e.id,t}s.off("pan").on("pan",(function(e){this._mouseDownFlag=!1,a.updateViewOnPan(l,e.dx,e.dy),o.dispatchAction(n.extend(u(),{dx:e.dx,dy:e.dy}))}),this),s.off("zoom").on("zoom",(function(e){if(this._mouseDownFlag=!1,a.updateViewOnZoom(l,e.scale,e.originX,e.originY),o.dispatchAction(n.extend(u(),{zoom:e.scale,originX:e.originX,originY:e.originY})),this._updateGroup){var t=this.group.scale;this._regionsGroup.traverse((function(e){"text"===e.type&&e.attr("scale",[1/t[0],1/t[1]])}))}}),this),s.setPointerChecker((function(t,n,a){return i.getViewRectAfterRoam().contain(n,a)&&!r(t,o,e)}))}};var f=m;e.exports=f},1346:function(e,t,o){var n=o(555),i=o(582),a=o(577),r=o(1347);function s(e){this.pointerChecker,this._zr=e,this._opt={};var t=n.bind,o=t(l,this),a=t(c,this),r=t(u,this),s=t(h,this),m=t(p,this);i.call(this),this.setPointerChecker=function(e){this.pointerChecker=e},this.enable=function(t,i){this.disable(),this._opt=n.defaults(n.clone(i)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",o),e.on("mousemove",a),e.on("mouseup",r)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",s),e.on("pinch",m))},this.disable=function(){e.off("mousedown",o),e.off("mousemove",a),e.off("mouseup",r),e.off("mousewheel",s),e.off("pinch",m)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function l(e){if(!(a.isMiddleOrRightButtonOnMouseUpDown(e)||e.target&&e.target.draggable)){var t=e.offsetX,o=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,o)&&(this._x=t,this._y=o,this._dragging=!0)}}function c(e){if(this._dragging&&d("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!r.isTaken(this._zr,"globalPan")){var t=e.offsetX,o=e.offsetY,n=this._x,i=this._y,s=t-n,l=o-i;this._x=t,this._y=o,this._opt.preventDefaultMouseMove&&a.stop(e.event),f(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:n,oldY:i,newX:t,newY:o})}}function u(e){a.isMiddleOrRightButtonOnMouseUpDown(e)||(this._dragging=!1)}function h(e){var t=d("zoomOnMouseWheel",e,this._opt),o=d("moveOnMouseWheel",e,this._opt),n=e.wheelDelta,i=Math.abs(n),a=e.offsetX,r=e.offsetY;if(0!==n&&(t||o)){if(t){var s=i>3?1.4:i>1?1.2:1.1;m(this,"zoom","zoomOnMouseWheel",e,{scale:n>0?s:1/s,originX:a,originY:r})}if(o){var l=Math.abs(n);m(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(n>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:r})}}}function p(e){r.isTaken(this._zr,"globalPan")||m(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function m(e,t,o,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(a.stop(n.event),f(e,t,o,n,i))}function f(e,t,o,i,a){a.isAvailableBehavior=n.bind(d,null,o,i),e.trigger(t,a)}function d(e,t,o){var i=o[e];return!e||i&&(!n.isString(i)||t.event[i+"Key"])}n.mixin(s,i);var g=s;e.exports=g},1347:function(e,t,o){var n=o(559),i="\0_ec_interaction_mutex";function a(e){return e[i]||(e[i]={})}n.registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){})),t.take=function(e,t,o){a(e)[t]=o},t.release=function(e,t,o){var n=a(e);n[t]===o&&(n[t]=null)},t.isTaken=function(e,t){return!!a(e)[t]}},1348:function(e,t){t.updateViewOnPan=function(e,t,o){var n=e.target,i=n.position;i[0]+=t,i[1]+=o,n.dirty()},t.updateViewOnZoom=function(e,t,o,n){var i=e.target,a=e.zoomLimit,r=i.position,s=i.scale,l=e.zoom=e.zoom||1;if(l*=t,a){var c=a.min||0,u=a.max||1/0;l=Math.max(Math.min(u,l),c)}var h=l/e.zoom;e.zoom=l,r[0]-=(o-r[0])*(h-1),r[1]-=(n-r[1])*(h-1),s[0]*=h,s[1]*=h,i.dirty()}},1349:function(e,t){var o={axisPointer:1,tooltip:1,brush:1};t.onIrrelevantElement=function(e,t,n){var i=t.getComponentByElement(e.topTarget),a=i&&i.coordinateSystem;return i&&i!==n&&!o[i.mainType]&&a&&a.model!==n}},1350:function(e,t,o){var n=o(559),i=o(555),a=o(1351).updateCenterAndZoom;n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(e,t){var o=e.componentType||"series";t.eachComponent({mainType:o,query:e},(function(t){var n=t.coordinateSystem;if("geo"===n.type){var r=a(n,e,t.get("scaleLimit"));t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom),"series"===o&&i.each(t.seriesGroup,(function(e){e.setCenter(r.center),e.setZoom(r.zoom)}))}}))}))},1351:function(e,t){t.updateCenterAndZoom=function(e,t,o){var n=e.getZoom(),i=e.getCenter(),a=t.zoom,r=e.dataToPoint(i);if(null!=t.dx&&null!=t.dy){r[0]-=t.dx,r[1]-=t.dy;i=e.pointToData(r);e.setCenter(i)}if(null!=a){if(o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(n*a,l),s)/n}e.scale[0]*=a,e.scale[1]*=a;var c=e.position,u=(t.originX-c[0])*(a-1),h=(t.originY-c[1])*(a-1);c[0]-=u,c[1]-=h,e.updateTransform();i=e.pointToData(r);e.setCenter(i),e.setZoom(a*n)}return{center:e.getCenter(),zoom:e.getZoom()}}},1352:function(e,t,o){o(560).__DEV__;var n=o(559),i=o(555),a=o(1353),r=o(568),s=o(562),l=o(622),c=o(651);function u(e,t){var o=e.get("boundingCoords");if(null!=o){var n=o[0],i=o[1];isNaN(n[0])||isNaN(n[1])||isNaN(i[0])||isNaN(i[1])||this.setBoundingRect(n[0],n[1],i[0]-n[0],i[1]-n[1])}var a,l=this.getBoundingRect(),c=e.get("layoutCenter"),u=e.get("layoutSize"),h=t.getWidth(),p=t.getHeight(),m=l.width/l.height*this.aspectScale,f=!1;if(c&&u&&(c=[s.parsePercent(c[0],h),s.parsePercent(c[1],p)],u=s.parsePercent(u,Math.min(h,p)),isNaN(c[0])||isNaN(c[1])||isNaN(u)||(f=!0)),f){var d={};m>1?(d.width=u,d.height=u/m):(d.height=u,d.width=u*m),d.y=c[1]-d.height/2,d.x=c[0]-d.width/2}else(a=e.getBoxLayoutParams()).aspect=m,d=r.getLayoutRect(a,{width:h,height:p});this.setViewRect(d.x,d.y,d.width,d.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function h(e,t){i.each(t.get("geoCoord"),(function(t,o){e.addGeoCoord(o,t)}))}var p={dimensions:a.prototype.dimensions,create:function(e,t){var o=[];e.eachComponent("geo",(function(e,n){var i=e.get("map"),r=e.get("aspectScale"),s=!0,l=c.retrieveMap(i);l&&l[0]&&"svg"===l[0].type?(null==r&&(r=1),s=!1):null==r&&(r=.75);var p=new a(i+n,i,e.get("nameMap"),s);p.aspectScale=r,p.zoomLimit=e.get("scaleLimit"),o.push(p),h(p,e),e.coordinateSystem=p,p.model=e,p.resize=u,p.resize(e,t)})),e.eachSeries((function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=o[t]}}));var n={};return e.eachSeriesByType("map",(function(e){if(!e.getHostGeoModel()){var t=e.getMapType();n[t]=n[t]||[],n[t].push(e)}})),i.each(n,(function(e,n){var r=i.map(e,(function(e){return e.get("nameMap")})),s=new a(n,n,i.mergeAll(r));s.zoomLimit=i.retrieve.apply(null,i.map(e,(function(e){return e.get("scaleLimit")}))),o.push(s),s.resize=u,s.aspectScale=e[0].get("aspectScale"),s.resize(e[0],t),i.each(e,(function(e){e.coordinateSystem=s,h(s,e)}))})),o},getFilledRegions:function(e,t,o){for(var n=(e||[]).slice(),a=i.createHashMap(),r=0;r<n.length;r++)a.set(n[r].name,n[r]);var s=l.load(t,o);return i.each(s.regions,(function(e){var t=e.name;!a.get(t)&&n.push({name:t})})),n}};n.registerCoordinateSystem("geo",p);var m=p;e.exports=m},1353:function(e,t,o){var n=o(555),i=o(563),a=o(1354),r=o(622);function s(e,t,o,n){a.call(this,e),this.map=t;var i=r.load(t,o);this._nameCoordMap=i.nameCoordMap,this._regionsMap=i.regionsMap,this._invertLongitute=null==n||n,this.regions=i.regions,this._rect=i.boundingRect}function l(e,t,o,n){var i=o.geoModel,a=o.seriesModel,r=i?i.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return r===this?r[e](n):null}s.prototype={constructor:s,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,o=0;o<t.length;o++)if(t[o].contain(e))return!0;return!1},transformTo:function(e,t,o,n){var a=this.getBoundingRect(),r=this._invertLongitute;a=a.clone(),r&&(a.y=-a.y-a.height);var s=this._rawTransformable;if(s.transform=a.calculateTransform(new i(e,t,o,n)),s.decomposeTransform(),r){var l=s.scale;l[1]=-l[1]}s.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,o=0;o<t.length;o++)if(t[o].contain(e))return t[o]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){return this._rect},dataToPoint:function(e,t,o){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return a.prototype.dataToPoint.call(this,e,t,o)},convertToPixel:n.curry(l,"dataToPoint"),convertFromPixel:n.curry(l,"pointToData")},n.mixin(s,a);var c=s;e.exports=c},1354:function(e,t,o){var n=o(555),i=o(561),a=o(573),r=o(563),s=o(611),l=i.applyTransform;function c(){s.call(this)}function u(e){this.name=e,this.zoomLimit,s.call(this),this._roamTransformable=new c,this._rawTransformable=new c,this._center,this._zoom}function h(e,t,o,n){var i=o.seriesModel,a=i?i.coordinateSystem:null;return a===this?a[e](n):null}n.mixin(c,s),u.prototype={constructor:u,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,o,n){return this._rect=new r(e,t,o,n),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,o,n){this.transformTo(e,t,o,n),this._viewRect=new r(e,t,o,n)},transformTo:function(e,t,o,n){var i=this.getBoundingRect(),a=this._rawTransformable;a.transform=i.calculateTransform(new r(e,t,o,n)),a.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,o=this.getDefaultCenter(),n=this.getCenter(),a=this.getZoom();n=i.applyTransform([],n,e),o=i.applyTransform([],o,e),t.origin=n,t.position=[o[0]-n[0],o[1]-n[1]],t.scale=[a,a],this._updateTransform()},_updateTransform:function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),a.copy(this.transform||(this.transform=[]),t.transform||a.create()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],a.invert(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?n.slice(e):a.create(),rawScale:n.slice(t.scale),rawPosition:n.slice(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,o){var n=t?this._rawTransform:this.transform;return o=o||[],n?l(o,e,n):i.copy(o,e)},pointToData:function(e){var t=this.invTransform;return t?l([],e,t):[e[0],e[1]]},convertToPixel:n.curry(h,"dataToPoint"),convertFromPixel:n.curry(h,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},n.mixin(u,s);var p=u;e.exports=p},1355:function(e,t,o){var n=o(555);e.exports=function(e){var t={};e.eachSeriesByType("map",(function(o){var i=o.getMapType();if(!o.getHostGeoModel()&&!t[i]){var a={};n.each(o.seriesGroup,(function(t){var o=t.coordinateSystem,n=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&n.each(n.mapDimension("value"),(function(e,t){var i=n.getName(t),r=o.getRegion(i);if(r&&!isNaN(e)){var s=a[i]||0,l=o.dataToPoint(r.center);a[i]=s+1,n.setItemLayout(t,{point:l,offset:s})}}))}));var r=o.getData();r.each((function(e){var t=r.getName(e),o=r.getItemLayout(e)||{};o.showLabel=!a[t],r.setItemLayout(e,o)})),t[i]=!0}}))}},1356:function(e,t){e.exports=function(e){e.eachSeriesByType("map",(function(e){var t=e.get("color"),o=e.getModel("itemStyle"),n=o.get("areaColor"),i=o.get("color")||t[e.seriesIndex%t.length];e.getData().setVisual({areaColor:n,color:i})}))}},1357:function(e,t,o){var n=o(555);e.exports=function(e){var t={};e.eachSeriesByType("map",(function(e){var o=e.getHostGeoModel(),n=o?"o"+o.id:"i"+e.getMapType();(t[n]=t[n]||[]).push(e)})),n.each(t,(function(e,t){for(var o,i,a,r=(o=n.map(e,(function(e){return e.getData()})),i=e[0].get("mapValueCalculation"),a={},n.each(o,(function(e){e.each(e.mapDimension("value"),(function(t,o){var n="ec-"+e.getName(o);a[n]=a[n]||[],isNaN(t)||a[n].push(t)}))})),o[0].map(o[0].mapDimension("value"),(function(e,t){for(var n,r="ec-"+o[0].getName(t),s=0,l=1/0,c=-1/0,u=a[r].length,h=0;h<u;h++)l=Math.min(l,a[r][h]),c=Math.max(c,a[r][h]),s+=a[r][h];return n="min"===i?l:"max"===i?c:"average"===i?s/u:s,0===u?NaN:n}))),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=0===s&&!e[s].getHostGeoModel(),e[s].setData(r.cloneShallow()),e[s].mainSeries=e[0]}))}},1358:function(e,t,o){var n=o(555);e.exports=function(e){var t=[];n.each(e.series,(function(e){e&&"map"===e.type&&(t.push(e),e.map=e.map||e.mapType,n.defaults(e,e.mapLocation))}))}},622:function(e,t,o){o(560).__DEV__;var n=o(555),i=n.each,a=n.createHashMap,r=o(651),s=o(1338),l=o(1343),c=o(563),u={geoJSON:s,svg:l},h={load:function(e,t,o){var n,r=[],s=a(),l=a(),h=m(e);return i(h,(function(a){var c=u[a.type].load(e,a,o);i(c.regions,(function(e){var o=e.name;t&&t.hasOwnProperty(o)&&(e=e.cloneShallow(o=t[o])),r.push(e),s.set(o,e),l.set(o,e.center)}));var h=c.boundingRect;h&&(n?n.union(h):n=h.clone())})),{regions:r,regionsMap:s,nameCoordMap:l,boundingRect:n||new c(0,0,0,0)}},makeGraphic:p("makeGraphic"),removeGraphic:p("removeGraphic")};function p(e){return function(t,o){var n=m(t),a=[];return i(n,(function(n){var i=u[n.type][e];i&&a.push(i(t,n,o))})),a}}function m(e){return r.retrieveMap(e)||[]}e.exports=h},655:function(e,t,o){var n=o(555),i=o(561),a=o(586),r=o(1332),s=o(557),l=o(562).round,c=["fromSymbol","toSymbol"];function u(e){return"_"+e+"Type"}function h(e,t,o){var i=t.getItemVisual(o,e);if(i&&"none"!==i){var r=t.getItemVisual(o,"color"),s=t.getItemVisual(o,e+"Size"),l=t.getItemVisual(o,e+"Rotate");n.isArray(s)||(s=[s,s]);var c=a.createSymbol(i,-s[0]/2,-s[1]/2,s[0],s[1],r);return c.__specifiedRotation=null==l||isNaN(l)?void 0:+l*Math.PI/180||0,c.name=e,c}}function p(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var o=t[2];o?(e.cpx1=o[0],e.cpy1=o[1]):(e.cpx1=NaN,e.cpy1=NaN)}function m(e,t,o){s.Group.call(this),this._createLine(e,t,o)}var f=m.prototype;f.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),o=this.childOfName("label");if(e||t||!o.ignore){for(var n=1,a=this.parent;a;)a.scale&&(n/=a.scale[0]),a=a.parent;var r=this.childOfName("line");if(this.__dirty||r.__dirty){var s=r.shape.percent,l=r.pointAt(0),c=r.pointAt(s),u=i.sub([],c,l);if(i.normalize(u,u),e){if(e.attr("position",l),null==(p=e.__specifiedRotation)){var h=r.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(h[1],h[0]))}else e.attr("rotation",p);e.attr("scale",[n*s,n*s])}if(t){var p;if(t.attr("position",c),null==(p=t.__specifiedRotation)){h=r.tangentAt(1);t.attr("rotation",-Math.PI/2-Math.atan2(h[1],h[0]))}else t.attr("rotation",p);t.attr("scale",[n*s,n*s])}if(!o.ignore){var m,f,d,g;o.attr("position",c);var v=o.__labelDistance,_=v[0]*n,y=v[1]*n,S=s/2,w=[(h=r.tangentAt(S))[1],-h[0]],M=r.pointAt(S);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var T,b=h[0]<0?-1:1;if("start"!==o.__position&&"end"!==o.__position){var x=-Math.atan2(h[1],h[0]);c[0]<l[0]&&(x=Math.PI+x),o.attr("rotation",x)}switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":T=-y,d="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":T=y,d="top";break;default:T=0,d="middle"}switch(o.__position){case"end":m=[u[0]*_+c[0],u[1]*y+c[1]],f=u[0]>.8?"left":u[0]<-.8?"right":"center",d=u[1]>.8?"top":u[1]<-.8?"bottom":"middle";break;case"start":m=[-u[0]*_+l[0],-u[1]*y+l[1]],f=u[0]>.8?"right":u[0]<-.8?"left":"center",d=u[1]>.8?"bottom":u[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":m=[_*b+l[0],l[1]+T],f=h[0]<0?"right":"left",g=[-_*b,-T];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":m=[M[0],M[1]+T],f="center",g=[0,-T];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":m=[-_*b+c[0],c[1]+T],f=h[0]>=0?"right":"left",g=[_*b,-T]}o.attr({style:{textVerticalAlign:o.__verticalAlign||d,textAlign:o.__textAlign||f},position:m,scale:[n,n],origin:g})}}}},f._createLine=function(e,t,o){var i=e.hostModel,a=function(e){var t=new r({name:"line",subPixelOptimize:!0});return p(t.shape,e),t}(e.getItemLayout(t));a.shape.percent=0,s.initProps(a,{shape:{percent:1}},i,t),this.add(a);var l=new s.Text({name:"label",lineLabelOriginalOpacity:1});this.add(l),n.each(c,(function(o){var n=h(o,e,t);this.add(n),this[u(o)]=e.getItemVisual(t,o)}),this),this._updateCommonStl(e,t,o)},f.updateData=function(e,t,o){var i=e.hostModel,a=this.childOfName("line"),r=e.getItemLayout(t),l={shape:{}};p(l.shape,r),s.updateProps(a,l,i,t),n.each(c,(function(o){var n=e.getItemVisual(t,o),i=u(o);if(this[i]!==n){this.remove(this.childOfName(o));var a=h(o,e,t);this.add(a)}this[i]=n}),this),this._updateCommonStl(e,t,o)},f._updateCommonStl=function(e,t,o){var i=e.hostModel,a=this.childOfName("line"),r=o&&o.lineStyle,u=o&&o.hoverLineStyle,h=o&&o.labelModel,p=o&&o.hoverLabelModel;if(!o||e.hasItemOption){var m=e.getItemModel(t);r=m.getModel("lineStyle").getLineStyle(),u=m.getModel("emphasis.lineStyle").getLineStyle(),h=m.getModel("label"),p=m.getModel("emphasis.label")}var f=e.getItemVisual(t,"color"),d=n.retrieve3(e.getItemVisual(t,"opacity"),r.opacity,1);a.useStyle(n.defaults({strokeNoScale:!0,fill:"none",stroke:f,opacity:d},r)),a.hoverStyle=u,n.each(c,(function(e){var t=this.childOfName(e);t&&(t.setColor(f),t.setStyle({opacity:d}))}),this);var g,v,_=h.getShallow("show"),y=p.getShallow("show"),S=this.childOfName("label");if((_||y)&&(g=f||"#000",null==(v=i.getFormattedLabel(t,"normal",e.dataType)))){var w=i.getRawValue(t);v=null==w?e.getName(t):isFinite(w)?l(w):w}var M=_?v:null,T=y?n.retrieve2(i.getFormattedLabel(t,"emphasis",e.dataType),v):null,b=S.style;if(null!=M||null!=T){s.setTextStyle(S.style,h,{text:M},{autoColor:g}),S.__textAlign=b.textAlign,S.__verticalAlign=b.textVerticalAlign,S.__position=h.get("position")||"middle";var x=h.get("distance");n.isArray(x)||(x=[x,x]),S.__labelDistance=x}S.hoverStyle=null!=T?{text:T,textFill:p.getTextColor(!0),fontStyle:p.getShallow("fontStyle"),fontWeight:p.getShallow("fontWeight"),fontSize:p.getShallow("fontSize"),fontFamily:p.getShallow("fontFamily")}:{text:null},S.ignore=!_&&!y,s.setHoverStyle(this)},f.highlight=function(){this.trigger("emphasis")},f.downplay=function(){this.trigger("normal")},f.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},f.setLinePoints=function(e){var t=this.childOfName("line");p(t.shape,e),t.dirty()},n.inherits(m,s.Group);var d=m;e.exports=d},769:function(e,t,o){var n=o(557),i=o(655),a=o(555),r=o(586).createSymbol,s=o(561),l=o(578);function c(e,t,o){n.Group.call(this),this.add(this.createLine(e,t,o)),this._updateEffectSymbol(e,t)}var u=c.prototype;u.createLine=function(e,t,o){return new i(e,t,o)},u._updateEffectSymbol=function(e,t){var o=e.getItemModel(t).getModel("effect"),n=o.get("symbolSize"),i=o.get("symbol");a.isArray(n)||(n=[n,n]);var s=o.get("color")||e.getItemVisual(t,"color"),l=this.childAt(1);this._symbolType!==i&&(this.remove(l),(l=r(i,-.5,-.5,1,1,s)).z2=100,l.culling=!0,this.add(l)),l&&(l.setStyle("shadowColor",s),l.setStyle(o.getItemStyle(["color"])),l.attr("scale",n),l.setColor(s),l.attr("scale",n),this._symbolType=i,this._symbolScale=n,this._updateEffectAnimation(e,o,t))},u._updateEffectAnimation=function(e,t,o){var n=this.childAt(1);if(n){var i=this,r=e.getItemLayout(o),s=1e3*t.get("period"),l=t.get("loop"),c=t.get("constantSpeed"),u=a.retrieve(t.get("delay"),(function(t){return t/e.count()*s/3})),h="function"==typeof u;if(n.ignore=!0,this.updateAnimationPoints(n,r),c>0&&(s=this.getLineLength(n)/c*1e3),s!==this._period||l!==this._loop){n.stopAnimation();var p=u;h&&(p=u(o)),n.__t>0&&(p=-s*n.__t),n.__t=0;var m=n.animate("",l).when(s,{__t:1}).delay(p).during((function(){i.updateSymbolPosition(n)}));l||m.done((function(){i.remove(n)})),m.start()}this._period=s,this._loop=l}},u.getLineLength=function(e){return s.dist(e.__p1,e.__cp1)+s.dist(e.__cp1,e.__p2)},u.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},u.updateData=function(e,t,o){this.childAt(0).updateData(e,t,o),this._updateEffectSymbol(e,t)},u.updateSymbolPosition=function(e){var t=e.__p1,o=e.__p2,n=e.__cp1,i=e.__t,a=e.position,r=[a[0],a[1]],c=l.quadraticAt,u=l.quadraticDerivativeAt;a[0]=c(t[0],n[0],o[0],i),a[1]=c(t[1],n[1],o[1],i);var h=u(t[0],n[0],o[0],i),p=u(t[1],n[1],o[1],i);if(e.rotation=-Math.atan2(p,h)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var m=1.05*s.dist(r,a);e.attr("scale",[e.scale[0],m]),1===i&&(a[0]=r[0]+(a[0]-r[0])/2,a[1]=r[1]+(a[1]-r[1])/2)}else if(1===e.__lastT){m=2*s.dist(t,a);e.attr("scale",[e.scale[0],m])}else e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},u.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var o=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,o,t)},a.inherits(c,n.Group);var h=c;e.exports=h},770:function(e,t,o){var n=o(557),i=o(555);function a(e,t,o){n.Group.call(this),this._createPolyline(e,t,o)}var r=a.prototype;r._createPolyline=function(e,t,o){var i=e.getItemLayout(t),a=new n.Polyline({shape:{points:i}});this.add(a),this._updateCommonStl(e,t,o)},r.updateData=function(e,t,o){var i=e.hostModel,a=this.childAt(0),r={shape:{points:e.getItemLayout(t)}};n.updateProps(a,r,i,t),this._updateCommonStl(e,t,o)},r._updateCommonStl=function(e,t,o){var a=this.childAt(0),r=e.getItemModel(t),s=e.getItemVisual(t,"color"),l=o&&o.lineStyle,c=o&&o.hoverLineStyle;o&&!e.hasItemOption||(l=r.getModel("lineStyle").getLineStyle(),c=r.getModel("emphasis.lineStyle").getLineStyle()),a.useStyle(i.defaults({strokeNoScale:!0,fill:"none",stroke:s},l)),a.hoverStyle=c,n.setHoverStyle(this)},r.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},i.inherits(a,n.Group);var s=a;e.exports=s},771:function(e,t,o){var n={seriesType:"lines",plan:o(618)(),reset:function(e){var t=e.coordinateSystem,o=e.get("polyline"),n=e.pipelineContext.large;return{progress:function(i,a){var r=[];if(n){var s,l=i.end-i.start;if(o){for(var c=0,u=i.start;u<i.end;u++)c+=e.getLineCoordsCount(u);s=new Float32Array(l+2*c)}else s=new Float32Array(4*l);var h=0,p=[];for(u=i.start;u<i.end;u++){var m=e.getLineCoords(u,r);o&&(s[h++]=m);for(var f=0;f<m;f++)p=t.dataToPoint(r[f],!1,p),s[h++]=p[0],s[h++]=p[1]}a.setLayout("linesPoints",s)}else for(u=i.start;u<i.end;u++){var d=a.getItemModel(u),g=(m=e.getLineCoords(u,r),[]);if(o)for(var v=0;v<m;v++)g.push(t.dataToPoint(r[v]));else{g[0]=t.dataToPoint(r[0]),g[1]=t.dataToPoint(r[1]);var _=d.get("lineStyle.curveness");+_&&(g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*_,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*_])}a.setItemLayout(u,g)}}}}};e.exports=n}}]);